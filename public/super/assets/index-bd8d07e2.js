import{m as v,r as j,z as L,k as x,a as l,q as P,o as a,b as V,e,w as t,d as g,s as m,v as i,h,A as r,B as U,y as D,C,n as G}from"./index-517d70fb.js";import H from"./edit-fd3a4696.js";import I from"./permissions-83bc05ae.js";import"./index-65d942f6.js";/* empty css                                                              */const J={class:"role-lists"},K={class:"m-t-15"},M={class:"flex justify-end m-t-15"},ae={__name:"index",setup(O){const k=v(null),w=v(),$=j({}),p=v(!1),y=v(!1),{pager:c,getLists:d,resetPage:Q,resetParams:W}=L({fetchFun:x.role.list,params:$}),B=async()=>{p.value=!0,await C(),await k.value.open()},R=async o=>{p.value=!0,await C(),await k.value.open("edit").setFormData(o)},N=async o=>{y.value=!0,await C(),await w.value.setFormData(o),await w.value.open("edit")},S=async o=>{await G.confirm("确定要删除？"),await x.role.delete({id:o}),d()};return d(),(o,s)=>{const E=l("Plus"),F=l("el-icon"),_=l("el-button"),u=l("el-table-column"),q=l("el-table"),z=l("la-pagination"),A=l("el-card"),f=P("perms"),T=P("loading");return a(),V("div",J,[e(A,{class:"border-none",shadow:"never"},{default:t(()=>[g("div",null,[m((a(),i(_,{type:"primary",onClick:B},{icon:t(()=>[e(F,null,{default:t(()=>[e(E)]),_:1})]),default:t(()=>[h(" 新增 ")]),_:1})),[[f,["auth.role/add"]]])]),m((a(),V("div",K,[g("div",null,[e(q,{data:r(c).lists,size:"large","row-key":"id","default-expand-all":""},{default:t(()=>[e(u,{prop:"name",label:"角色名称","min-width":"150"}),e(u,{prop:"description",label:"备注","min-width":"200"}),e(u,{prop:"create_time",label:"创建时间","min-width":"100"}),e(u,{prop:"update_time",label:"更新时间","min-width":"100"}),e(u,{label:"操作",width:"200",fixed:"right"},{default:t(({row:n})=>[m((a(),i(_,{link:"",type:"primary",onClick:b=>R(n)},{default:t(()=>[h(" 编辑 ")]),_:2},1032,["onClick"])),[[f,["auth.role/edit"]]]),m((a(),i(_,{link:"",type:"primary",onClick:b=>N(n)},{default:t(()=>[h(" 分配权限 ")]),_:2},1032,["onClick"])),[[f,["auth.role/edit"]]]),m((a(),i(_,{link:"",type:"danger",onClick:b=>S(n.id)},{default:t(()=>[h(" 删除 ")]),_:2},1032,["onClick"])),[[f,["auth.role/delete"]]])]),_:1})]),_:1},8,["data"])]),g("div",M,[e(z,{modelValue:r(c),"onUpdate:modelValue":s[0]||(s[0]=n=>U(c)?c.value=n:null),onChange:r(d)},null,8,["modelValue","onChange"])])])),[[T,r(c).loading]])]),_:1}),p.value?(a(),i(H,{key:0,ref_key:"editRef",ref:k,onSuccess:r(d),onClose:s[1]||(s[1]=n=>p.value=!1)},null,8,["onSuccess"])):D("",!0),y.value?(a(),i(I,{key:1,ref_key:"permissionsRef",ref:w,onSuccess:r(d),onClose:s[2]||(s[2]=n=>y.value=!1)},null,8,["onSuccess"])):D("",!0)])}}};export{ae as default};
