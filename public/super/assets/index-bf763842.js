import{_ as L,k as y,n as k,a as o,q as w,o as n,b as v,e,w as t,d as b,s as p,v as s,h as r,x as B,y as u}from"./index-0236d453.js";import N from"./edit-44e05085.js";import"./index-296eea2f.js";/* empty css                                                              */const R={components:{editDialog:N},data(){return{showEdit:!1,formData:{},tableObj:{loading:!1,lists:[]}}},mounted(){this.tableObj.loading=!0,this.getLists()},methods:{async getLists(){let{data:a}=await y.menu.list();this.tableObj.lists=a,this.tableObj.loading=!1},handleAdd(){this.showEdit=!0,this.$nextTick(function(){this.$refs.editRef.open()})},handleEdit(a){this.showEdit=!0,this.$nextTick(function(){this.$refs.editRef.open("edit").setFormData(a)})},async handleDelete(a){await k.confirm("确定要删除？");const d=await y.menu.delete({id:a});d.error&&k.error(d.msg),this.getLists()}}},T={class:"role-lists"},A={class:"m-t-15"},P={class:"flex justify-end mt-4"};function S(a,d,$,q,m,c){const C=o("Plus"),g=o("el-icon"),_=o("el-button"),i=o("el-table-column"),h=o("el-tag"),x=o("el-table"),D=o("pagination"),E=o("el-card"),j=o("edit-dialog"),f=w("perms"),V=w("loading");return n(),v("div",T,[e(E,{class:"border-none",shadow:"never"},{default:t(()=>[b("div",null,[p((n(),s(_,{type:"primary",onClick:c.handleAdd},{icon:t(()=>[e(g,null,{default:t(()=>[e(C)]),_:1})]),default:t(()=>[r(" 新增 ")]),_:1},8,["onClick"])),[[f,["auth.role/add"]]])]),p((n(),v("div",A,[b("div",null,[e(x,{data:m.tableObj.lists,size:"large","row-key":"id","default-expand-all":""},{default:t(()=>[e(i,{prop:"permission_name",label:"名称","min-width":"150"}),e(i,{prop:"icon",label:"图标","min-width":"80"},{default:t(({row:l})=>[e(g,null,{default:t(()=>[(n(),s(B(l.icon)))]),_:2},1024)]),_:1}),e(i,{prop:"type",label:"类型","min-width":"80"},{default:t(({row:l})=>[l.type==0?(n(),s(h,{key:0,class:"ml-2",type:"info"},{default:t(()=>[r("目录")]),_:1})):u("",!0),l.type==1?(n(),s(h,{key:1,class:"ml-2",type:"success"},{default:t(()=>[r("页面")]),_:1})):u("",!0),l.type==2?(n(),s(h,{key:2,class:"ml-2"},{default:t(()=>[r("按钮")]),_:1})):u("",!0)]),_:1}),e(i,{prop:"route",label:"路由","min-width":"200"}),e(i,{prop:"component",label:"视图文件","min-width":"200"}),e(i,{prop:"weigh",label:"权重","min-width":"60"}),e(i,{prop:"create_time",label:"创建时间","min-width":"120"}),e(i,{label:"操作",width:"200",fixed:"right"},{default:t(({row:l})=>[p((n(),s(_,{link:"",type:"primary",onClick:O=>c.handleEdit(l)},{default:t(()=>[r(" 编辑 ")]),_:2},1032,["onClick"])),[[f,["auth.role/edit"]]]),p((n(),s(_,{link:"",type:"danger",onClick:O=>c.handleDelete(l.id)},{default:t(()=>[r(" 删除 ")]),_:2},1032,["onClick"])),[[f,["auth.role/delete"]]])]),_:1})]),_:1},8,["data"])]),b("div",P,[e(D,{modelValue:a.pager,"onUpdate:modelValue":d[0]||(d[0]=l=>a.pager=l),onChange:c.getLists},null,8,["modelValue","onChange"])])])),[[V,m.tableObj.loading]])]),_:1}),m.showEdit?(n(),s(j,{key:0,ref:"editRef",onSuccess:c.getLists,onClose:d[1]||(d[1]=l=>m.showEdit=!1)},null,8,["onSuccess"])):u("",!0)])}const H=L(R,[["render",S]]);export{H as default};
