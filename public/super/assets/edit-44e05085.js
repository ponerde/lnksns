import{_ as y,k as s,a as r,o as u,b as w,e as l,w as a,h as f,v as _,y as c}from"./index-0236d453.js";import{l as x}from"./index-296eea2f.js";/* empty css                                                              */const C={components:{laDialog:x},data(){return{mode:"add",menuOptions:[],formData:{type:1,icon:"",weigh:0},formRules:{permission_name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],parent_id:[{required:!0,message:"请选择父级",trigger:"blur"}],permission_mark:[{required:!0,message:"请输入权限标识",trigger:"blur"}]}}},computed:{dialogTitle(){return this.mode=="add"?"添加":"编辑"}},methods:{async setFormData(m){const o=await s.menu.read({id:m.id});this.formData=o.data},async getMenuOptions(){const m=await s.menu.optionsTree();m.data.unshift({label:"顶级",value:0}),this.menuOptions=m.data},open(m="add"){return this.mode=m,this.$refs.dialogRef.open(),this.getMenuOptions(),this},close(){this.$emit("close")},async handleSubmit(){await this.$refs.formRef.validate(),this.mode=="add"?await s.menu.create(this.formData):await s.menu.update(this.formData),this.close(),this.$emit("success")},handleClose(){this.close()}}};function U(m,o,R,v,e,d){const p=r("el-radio"),D=r("el-radio-group"),n=r("el-form-item"),i=r("el-input"),V=r("la-icon-picker"),g=r("el-tree-select"),b=r("el-input-number"),h=r("el-form"),k=r("la-dialog");return u(),w("div",null,[l(k,{ref:"dialogRef",title:d.dialogTitle,async:!0,width:"550px",onConfirm:d.handleSubmit,onCancel:d.handleClose},{default:a(()=>[l(h,{ref:"formRef",model:e.formData,"label-width":"84px",rules:e.formRules},{default:a(()=>[l(n,{label:"菜单类型"},{default:a(()=>[l(D,{modelValue:e.formData.type,"onUpdate:modelValue":o[0]||(o[0]=t=>e.formData.type=t),class:"ml-4"},{default:a(()=>[l(p,{label:0},{default:a(()=>[f("目录")]),_:1}),l(p,{label:1},{default:a(()=>[f("菜单")]),_:1}),l(p,{label:2},{default:a(()=>[f("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"菜单名称",prop:"permission_name"},{default:a(()=>[l(i,{modelValue:e.formData.permission_name,"onUpdate:modelValue":o[1]||(o[1]=t=>e.formData.permission_name=t)},null,8,["modelValue"])]),_:1}),e.formData.type!=2?(u(),_(n,{key:0,label:"菜单图标"},{default:a(()=>[l(V,{modelValue:e.formData.icon,"onUpdate:modelValue":o[2]||(o[2]=t=>e.formData.icon=t)},null,8,["modelValue"])]),_:1})):c("",!0),l(n,{label:"父级菜单",prop:"parent_id"},{default:a(()=>[l(g,{modelValue:e.formData.parent_id,"onUpdate:modelValue":o[3]||(o[3]=t=>e.formData.parent_id=t),data:e.menuOptions,"check-strictly":"","render-after-expand":!0,"show-checkbox":""},null,8,["modelValue","data"])]),_:1}),l(n,{label:"权限标识",prop:"permission_mark"},{default:a(()=>[l(i,{modelValue:e.formData.permission_mark,"onUpdate:modelValue":o[4]||(o[4]=t=>e.formData.permission_mark=t)},null,8,["modelValue"])]),_:1}),e.formData.type==1?(u(),_(n,{key:1,label:"路由"},{default:a(()=>[l(i,{modelValue:e.formData.route,"onUpdate:modelValue":o[5]||(o[5]=t=>e.formData.route=t)},null,8,["modelValue"])]),_:1})):c("",!0),e.formData.type==1?(u(),_(n,{key:2,label:"视图"},{default:a(()=>[l(i,{modelValue:e.formData.component,"onUpdate:modelValue":o[6]||(o[6]=t=>e.formData.component=t)},null,8,["modelValue"])]),_:1})):c("",!0),l(n,{label:"权重"},{default:a(()=>[l(b,{modelValue:e.formData.weigh,"onUpdate:modelValue":o[7]||(o[7]=t=>e.formData.weigh=t),min:"0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","onConfirm","onCancel"])])}const B=y(C,[["render",U]]);export{B as default};
