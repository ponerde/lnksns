import{m as C,r as T,z as U,a as l,q as V,o as n,b as x,e,w as t,D as j,A as s,h as i,s as k,d as D,v as r,B as A,y as H,C as I,n as L}from"./index-517d70fb.js";import{a as B}from"./index-5e9f0cf2.js";import G from"./edit-8fdd084a.js";import"./index-65d942f6.js";/* empty css                                                              */const J={class:"admin-lists"},M={class:"m-t-15"},O={class:"flex justify-end m-t-15"},te={__name:"index",setup(Q){const v=C(null),y=C(!1),u=T({content:""}),{pager:d,getLists:_,resetPage:b,resetParams:E}=U({fetchFun:B.comment.list,params:u}),N=async m=>{y.value=!0,await I(),await v.value.setFormData(m),await v.value.open("edit")},P=async m=>{await L.confirm("确定要删除？"),await B.comment.delete({id:m}),_()};return _(),(m,c)=>{const $=l("el-input"),g=l("el-form-item"),p=l("el-button"),z=l("el-form"),h=l("el-card"),o=l("el-table-column"),K=l("el-avatar"),f=l("el-tag"),R=l("el-table"),q=l("la-pagination"),w=V("perms"),F=V("loading");return n(),x("div",J,[e(h,{class:"border-none",shadow:"never"},{default:t(()=>[e(z,{style:{"margin-bottom":"-16px"},model:u,inline:""},{default:t(()=>[e(g,{label:"内容",props:"content"},{default:t(()=>[e($,{modelValue:u.content,"onUpdate:modelValue":c[0]||(c[0]=a=>u.content=a),clearable:"",onKeyup:j(s(b),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,null,{default:t(()=>[e(p,{type:"primary",onClick:s(b)},{default:t(()=>[i("查询")]),_:1},8,["onClick"]),e(p,{onClick:s(E)},{default:t(()=>[i("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(h,{class:"border-none m-t-15",shadow:"never"},{default:t(()=>[k((n(),x("div",M,[D("div",null,[e(R,{data:s(d).lists,size:"large","row-key":"id","default-expand-all":""},{default:t(()=>[e(o,{prop:"id",label:"ID","min-width":"50"}),e(o,{prop:"user.avatar",label:"头像","min-width":"100"},{default:t(({row:a})=>[e(K,{size:50,src:a.user.avatar,onError:m.errorHandler},null,8,["src","onError"])]),_:1}),e(o,{prop:"user.name",label:"昵称"}),e(o,{prop:"content",label:"内容","min-width":"200","show-overflow-tooltip":""}),e(o,{prop:"status",label:"状态","min-width":"120"},{default:t(({row:a})=>[a.status==1?(n(),r(f,{key:0,class:"ml-2",type:"success"},{default:t(()=>[i("正常")]),_:1})):a.status==2?(n(),r(f,{key:1,class:"ml-2",type:"info"},{default:t(()=>[i("违法违规")]),_:1})):a.status==3?(n(),r(f,{key:2,class:"ml-2",type:"info"},{default:t(()=>[i("用户删除")]),_:1})):(n(),r(f,{key:3,class:"ml-2",type:"danger"},{default:t(()=>[i("待审核")]),_:1}))]),_:1}),e(o,{prop:"create_time",label:"创建时间","min-width":"180"}),e(o,{prop:"update_time",label:"更新时间","min-width":"180"}),e(o,{label:"操作",width:"120",fixed:"right"},{default:t(({row:a})=>[k((n(),r(p,{link:"",type:"primary",onClick:S=>N(a)},{default:t(()=>[i(" 编辑 ")]),_:2},1032,["onClick"])),[[w,["comment/edit"]]]),k((n(),r(p,{link:"",type:"danger",onClick:S=>P(a.id)},{default:t(()=>[i(" 删除 ")]),_:2},1032,["onClick"])),[[w,["comment/delete"]]])]),_:1})]),_:1},8,["data"])]),D("div",O,[e(q,{modelValue:s(d),"onUpdate:modelValue":c[1]||(c[1]=a=>A(d)?d.value=a:null),onChange:s(_)},null,8,["modelValue","onChange"])])])),[[F,s(d).loading]])]),_:1}),y.value?(n(),r(G,{key:0,ref_key:"editRef",ref:v,onSuccess:s(_),onClose:c[2]||(c[2]=a=>y.value=!1)},null,8,["onSuccess"])):H("",!0)])}}};export{te as default};
