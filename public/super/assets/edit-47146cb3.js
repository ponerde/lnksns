import{a as m}from"./index-b87949a0.js";import{l as N}from"./index-296eea2f.js";import{m as r,r as O,c as S,a as n,o as T,b as F,e,w as t,h as i,n as b}from"./index-0236d453.js";/* empty css                                                              */const I={__name:"edit",emits:["success","close"],setup(j,{expose:w,emit:c}){const f=r(null),_=r(null),p=r("add"),a=r({name:"",highlight:0,status:1}),x=O({avatar:[{required:!0,message:"请上传头像",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]}),y=r([]),R=S(()=>p.value=="edit"?"编辑圈子":"新增圈子"),h=async()=>{const o=await m.role.list();y.value=o.data},U=async o=>{const l=await m.circle.read({id:o.id});a.value=l.data},k=(o="add")=>{p.value=o,f.value.open()},v=()=>{c("close")},C=async()=>{var l;await((l=_.value)==null?void 0:l.validate());let o;p.value=="add"?o=await m.circle.create(a.value):o=await m.circle.update(a.value),o.error?b.msgError(o.msg):(v(),c("success"),b.msgSuccess(o.msg))},D=async()=>{v()};return h(),w({open:k,setFormData:U}),(o,l)=>{const q=n("la-uploader"),s=n("el-form-item"),g=n("el-input"),B=n("el-input-number"),d=n("el-radio"),V=n("el-radio-group"),E=n("el-form");return T(),F("div",null,[e(N,{ref_key:"dialogRef",ref:f,title:R.value,async:!0,width:"550px",onConfirm:C,onCancel:D},{default:t(()=>[e(E,{ref_key:"formRef",ref:_,model:a.value,"label-width":"84px",rules:x},{default:t(()=>[e(s,{label:"头像",prop:"avatar"},{default:t(()=>[e(q,{modelValue:a.value.avatar,"onUpdate:modelValue":l[0]||(l[0]=u=>a.value.avatar=u)},null,8,["modelValue"])]),_:1}),e(s,{label:"名称",prop:"name"},{default:t(()=>[e(g,{modelValue:a.value.name,"onUpdate:modelValue":l[1]||(l[1]=u=>a.value.name=u)},null,8,["modelValue"])]),_:1}),e(s,{label:"简介",prop:"intro"},{default:t(()=>[e(g,{type:"textarea",modelValue:a.value.intro,"onUpdate:modelValue":l[2]||(l[2]=u=>a.value.intro=u)},null,8,["modelValue"])]),_:1}),e(s,{label:"权重"},{default:t(()=>[e(B,{modelValue:a.value.weigh,"onUpdate:modelValue":l[3]||(l[3]=u=>a.value.weigh=u),min:"0"},null,8,["modelValue"])]),_:1}),e(s,{label:"高亮"},{default:t(()=>[e(V,{modelValue:a.value.highlight,"onUpdate:modelValue":l[4]||(l[4]=u=>a.value.highlight=u),class:"ml-4"},{default:t(()=>[e(d,{label:1},{default:t(()=>[i("是")]),_:1}),e(d,{label:0},{default:t(()=>[i("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"状态"},{default:t(()=>[e(V,{modelValue:a.value.status,"onUpdate:modelValue":l[5]||(l[5]=u=>a.value.status=u),class:"ml-4"},{default:t(()=>[e(d,{label:1},{default:t(()=>[i("正常")]),_:1}),e(d,{label:0},{default:t(()=>[i("关闭")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}};export{I as default};
