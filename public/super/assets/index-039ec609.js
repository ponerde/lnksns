import{m as v,r as H,z as U,a as n,q as k,o,b as w,e,w as t,D as j,A as r,h as s,s as C,d as V,v as i,y as A,B as F,n as I}from"./index-517d70fb.js";import{a as x}from"./index-5e9f0cf2.js";const L={class:"admin-lists"},R={class:"m-t-15"},T={class:"flex justify-end m-t-15"},O={__name:"index",setup($){v(null),v(!1);const m=H({content:""}),{pager:d,getLists:u,resetPage:y,resetParams:B}=U({fetchFun:x.message.list,params:m}),D=async p=>{await I.confirm("确定要删除？"),await x.message.delete({id:p}),u()};return u(),(p,_)=>{const E=n("el-input"),g=n("el-form-item"),f=n("el-button"),z=n("el-form"),b=n("el-card"),l=n("el-table-column"),h=n("el-avatar"),c=n("el-tag"),N=n("el-table"),P=n("la-pagination"),q=k("perms"),K=k("loading");return o(),w("div",L,[e(b,{class:"border-none",shadow:"never"},{default:t(()=>[e(z,{style:{"margin-bottom":"-16px"},model:m,inline:""},{default:t(()=>[e(g,{label:"内容",props:"content"},{default:t(()=>[e(E,{modelValue:m.content,"onUpdate:modelValue":_[0]||(_[0]=a=>m.content=a),clearable:"",onKeyup:j(r(y),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,null,{default:t(()=>[e(f,{type:"primary",onClick:r(y)},{default:t(()=>[s("查询")]),_:1},8,["onClick"]),e(f,{onClick:r(B)},{default:t(()=>[s("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(b,{class:"border-none m-t-15",shadow:"never"},{default:t(()=>[C((o(),w("div",R,[V("div",null,[e(N,{data:r(d).lists,size:"large","row-key":"id","default-expand-all":""},{default:t(()=>[e(l,{prop:"id",label:"ID","min-width":"50"}),e(l,{prop:"user.avatar",label:"头像","min-width":"100"},{default:t(({row:a})=>[e(h,{size:50,src:a.user.avatar,onError:p.errorHandler},null,8,["src","onError"])]),_:1}),e(l,{prop:"user.name",label:"昵称"}),e(l,{prop:"read",label:"读","min-width":"100"},{default:t(({row:a})=>[a.read==1?(o(),i(c,{key:0,class:"ml-2",type:"success"},{default:t(()=>[s("已读")]),_:1})):(o(),i(c,{key:1,class:"ml-2",type:"danger"},{default:t(()=>[s("未读")]),_:1}))]),_:1}),e(l,{prop:"title",label:"标题","min-width":"100"}),e(l,{prop:"content",label:"内容","min-width":"200","show-overflow-tooltip":"true"}),e(l,{prop:"img",label:"图片","min-width":"100"},{default:t(({row:a})=>[a.img?(o(),i(h,{key:0,size:50,shape:"square",src:a.img,onError:p.errorHandler},null,8,["src","onError"])):A("",!0)]),_:1}),e(l,{prop:"type",label:"类型","min-width":"100"},{default:t(({row:a})=>[a.type==1?(o(),i(c,{key:0,class:"ml-2",type:"info"},{default:t(()=>[s("赞")]),_:1})):a.type==2?(o(),i(c,{key:1,class:"ml-2",type:"info"},{default:t(()=>[s("评论")]),_:1})):(o(),i(c,{key:2,class:"ml-2",type:"info"},{default:t(()=>[s("系统")]),_:1}))]),_:1}),e(l,{prop:"create_time",label:"通知时间","min-width":"180"}),e(l,{label:"操作",width:"80",fixed:"right"},{default:t(({row:a})=>[C((o(),i(f,{link:"",type:"danger",onClick:G=>D(a.id)},{default:t(()=>[s(" 删除 ")]),_:2},1032,["onClick"])),[[q,["message/delete"]]])]),_:1})]),_:1},8,["data"])]),V("div",T,[e(P,{modelValue:r(d),"onUpdate:modelValue":_[1]||(_[1]=a=>F(d)?d.value=a:null),onChange:r(u)},null,8,["modelValue","onChange"])])])),[[K,r(d).loading]])]),_:1})])}}};export{O as default};
