import{m as r,r as q,c as G,a as n,o as p,b as g,e as a,w as t,F as L,G as j,v as z,h as w,k as m,n as k}from"./index-0236d453.js";import{l as A}from"./index-296eea2f.js";/* empty css                                                              */const M={__name:"edit",emits:["success","close"],setup(H,{expose:y,emit:c}){const f=r(null),v=r(null),i=r("add"),l=r({username:"",status:"normal"}),U=q({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名最小为3个字符串"}]}),_=r([]),x=G(()=>i.value=="edit"?"编辑用户":"新增用户"),R=async()=>{const u=await m.role.list();_.value=u.data},C=async u=>{const e=await m.admin.read({id:u.id});l.value=e.data},B=(u="add")=>{i.value=u,f.value.open()},V=()=>{c("close")},D=async()=>{var e;await((e=v.value)==null?void 0:e.validate());let u;i.value=="add"?u=await m.admin.create(l.value):u=await m.admin.update(l.value),u.error?k.msgError(u.msg):(V(),c("success"),k.msgSuccess(u.msg))},F=async()=>{V()};return R(),y({open:B,setFormData:C}),(u,e)=>{const S=n("la-uploader"),s=n("el-form-item"),d=n("el-input"),E=n("el-option"),N=n("el-select"),b=n("el-radio"),O=n("el-radio-group"),T=n("el-form");return p(),g("div",null,[a(A,{ref_key:"dialogRef",ref:f,title:x.value,async:!0,width:"550px",onConfirm:D,onCancel:F},{default:t(()=>[a(T,{ref_key:"formRef",ref:v,model:l.value,"label-width":"84px",rules:U},{default:t(()=>[a(s,{label:"头像",prop:"avatar"},{default:t(()=>[a(S,{modelValue:l.value.avatar,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.avatar=o)},null,8,["modelValue"])]),_:1}),a(s,{label:"用户名",prop:"username"},{default:t(()=>[a(d,{modelValue:l.value.username,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.username=o)},null,8,["modelValue"])]),_:1}),a(s,{label:"密码",prop:"password"},{default:t(()=>[a(d,{type:"password",modelValue:l.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.password=o)},null,8,["modelValue"])]),_:1}),a(s,{label:"昵称",prop:"nickname"},{default:t(()=>[a(d,{modelValue:l.value.nickname,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.nickname=o)},null,8,["modelValue"])]),_:1}),a(s,{label:"手机号",prop:"mobile"},{default:t(()=>[a(d,{modelValue:l.value.mobile,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.mobile=o)},null,8,["modelValue"])]),_:1}),a(s,{label:"邮箱",prop:"email"},{default:t(()=>[a(d,{modelValue:l.value.email,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.email=o)},null,8,["modelValue"])]),_:1}),a(s,{label:"角色",prop:"role_id"},{default:t(()=>[a(N,{modelValue:l.value.role_id,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.role_id=o),class:"m-2",placeholder:"Select"},{default:t(()=>[(p(!0),g(L,null,j(_.value,o=>(p(),z(E,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"状态"},{default:t(()=>[a(O,{modelValue:l.value.status,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.status=o),class:"ml-4"},{default:t(()=>[a(b,{label:"normal"},{default:t(()=>[w("正常")]),_:1}),a(b,{label:"disabled"},{default:t(()=>[w("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}};export{M as default};
