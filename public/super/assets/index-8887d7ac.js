import{_ as B,j as y,n as k,a as o,q as w,o as n,b as v,e,w as t,d as g,s as p,v as i,g as r,x as N,y as _}from"./index-6cdb2e92.js";import O from"./edit-ffc4bb29.js";import"./index-d76bd3bc.js";/* empty css                                                              */const R={components:{editDialog:O},data(){return{showEdit:!1,formData:{},tableObj:{loading:!1,lists:[]}}},mounted(){this.getLists()},methods:{async getLists(){let{data:a}=await y.menu.list();this.tableObj.lists=a},handleAdd(){this.showEdit=!0,this.$nextTick(function(){this.$refs.editRef.open()})},handleEdit(a){this.showEdit=!0,this.$nextTick(function(){this.$refs.editRef.open("edit").setFormData(a)})},async handleDelete(a){await k.confirm("确定要删除？");const d=await y.menu.delete({id:a});d.error&&k.error(d.msg),this.getLists()}}},T={class:"role-lists"},A={class:"m-t-15"},P={class:"flex justify-end mt-4"};function S(a,d,$,q,m,c){const C=o("Plus"),b=o("el-icon"),u=o("el-button"),s=o("el-table-column"),f=o("el-tag"),x=o("el-table"),D=o("pagination"),E=o("el-card"),V=o("edit-dialog"),h=w("perms"),j=w("loading");return n(),v("div",T,[e(E,{class:"border-none",shadow:"never"},{default:t(()=>[g("div",null,[p((n(),i(u,{type:"primary",onClick:c.handleAdd},{icon:t(()=>[e(b,null,{default:t(()=>[e(C)]),_:1})]),default:t(()=>[r(" 新增 ")]),_:1},8,["onClick"])),[[h,["auth.role/add"]]])]),p((n(),v("div",A,[g("div",null,[e(x,{data:m.tableObj.lists,size:"large","row-key":"id","default-expand-all":""},{default:t(()=>[e(s,{prop:"permission_name",label:"名称","min-width":"150"}),e(s,{prop:"icon",label:"图标","min-width":"80"},{default:t(({row:l})=>[e(b,null,{default:t(()=>[(n(),i(N(l.icon)))]),_:2},1024)]),_:1}),e(s,{prop:"type",label:"类型","min-width":"80"},{default:t(({row:l})=>[l.type==0?(n(),i(f,{key:0,class:"ml-2",type:"info"},{default:t(()=>[r("目录")]),_:1})):_("",!0),l.type==1?(n(),i(f,{key:1,class:"ml-2",type:"success"},{default:t(()=>[r("页面")]),_:1})):_("",!0),l.type==2?(n(),i(f,{key:2,class:"ml-2"},{default:t(()=>[r("按钮")]),_:1})):_("",!0)]),_:1}),e(s,{prop:"route",label:"路由","min-width":"200"}),e(s,{prop:"component",label:"视图文件","min-width":"200"}),e(s,{prop:"weigh",label:"权重","min-width":"60"}),e(s,{prop:"create_time",label:"创建时间","min-width":"120"}),e(s,{label:"操作",width:"200",fixed:"right"},{default:t(({row:l})=>[p((n(),i(u,{link:"",type:"primary",onClick:L=>c.handleEdit(l)},{default:t(()=>[r(" 编辑 ")]),_:2},1032,["onClick"])),[[h,["auth.role/edit"]]]),p((n(),i(u,{link:"",type:"danger",onClick:L=>c.handleDelete(l.id)},{default:t(()=>[r(" 删除 ")]),_:2},1032,["onClick"])),[[h,["auth.role/delete"]]])]),_:1})]),_:1},8,["data"])]),g("div",P,[e(D,{modelValue:a.pager,"onUpdate:modelValue":d[0]||(d[0]=l=>a.pager=l),onChange:c.getLists},null,8,["modelValue","onChange"])])])),[[j,m.tableObj.loading]])]),_:1}),m.showEdit?(n(),i(V,{key:0,ref:"editRef",onSuccess:c.getLists,onClose:d[1]||(d[1]=l=>m.showEdit=!1)},null,8,["onSuccess"])):_("",!0)])}const H=B(R,[["render",S]]);export{H as default};
